Источник: https://www.youtube.com/watch?v=1cc4E4P8xHk&ab_channel=%D0%94%D0%96%D0%90%D0%92%D0%90%D0%A1%D0%9A%D0%A0%D0%98%D0%9F%D0%A2%D0%98%D0%97%D0%95%D0%A0%D0%AB%7C%D0%9A%D0%98%D0%A0%D0%98%D0%9B%D0%9B%D0%9F%D0%9E%D0%97%D0%94%D0%9D%D0%AF%D0%9A%D0%9E%D0%92  
27.01.2025  
ЗП: 340к рублей

# Вопросы
## 1. Как масштабировать и чтение и запись в БД?
Поможет репликация, можем разносить клиентов читать, репликацией масштиабируем чтение. Мы можем клиентов направлять к репликам.  
Репликация - повышение отказоустойчивости. 

### S: Чем репликация отличается от бэкапов? Если бэкапы делаются 1 раз в день.
Если нет репликции и если упадет БД, то данные будут максимально старые 1 дня.  
Обычно применяют комбинированный подход.  
Если реплика есть - то она создает живой клон.

### S: Какие виды?
Hot-standby - рядом стоит реплика, на которой синхронно реплицируем, то при падении у нас не будет downtime, синхронная репликация. 

### S: В каких кейсах применял бы синхронную репликацию?

### 2. Как устроен Event Loop в Nodejs?
TODO: Гугл

### 3. Что такое Worker Threads?
TODO: Гугл

### 4. Знаком с Nest.js?
Ангуляр переписанный на backend. 

### S: А когда он не нужен?
Небольшой сервис, где нет сложной бизнес логики. Когда нужно сделать 2 эндпоинта например. Маленький код, который выполняет небольшую задачу.

### 5. Когда нам нужны декораторы?
Когда ты меняешь поведение, но сохраняешь интерфейс. Позволяет писать декларативный код и не нужно писать или прокидывать кучу функций.

### 6. Зачем нужны pipe в Nest.js?
Пайпы пришли из ангуляра, больше в ангуляре использовал чем в Nest.js, когда нужно было данные преобразовывать, мутировать.  
TODO: Гугл про пайпы в Nest.js

### 7. Что скажешь по поводу интерсептеров?
Это можно сказать Middleware, чтобы что-то перехватить и изменить данные. Больше использовал в axios когда нужно прокинуть токены для API библиотек.

### 8. Есть БД PostgreSQL, зачем нужен Redis?
Кэширует данные, быстрые данные, потому что хранится все в оперативной памяти, но если сервер ребутается, то это все сохраняется на жесткий диск, потом вытаскивает.

### 9. Везде Rest, а человек хочет переписать на GraphQL. Какие аргументы в его пользу?
1. На стороне клиента GraphQL - упращает.
2. На стороне сервера - усложнаяет.
Попытка предоставить возможность тем кто работает на клиенте - получать данные которые им необходимо.  
Много полей в БД, много разной структуры. 

### 10. Кейс 1. Api возвращает 503, а в логах пусто. ЧТо пойдешь делать?
Пойду смотреть что находится на сетевом слое, либо на сервер между нашей API, может быть дело на уровне Nginx, начал бы с него.   

### 11. Есть кодовая база, где все наши API и джобы? В какой момент нужно разделить на отдельные инстансы не связанные друг с другом?
1. Со стороны эксплуатации. Нагрузка возрасла на ендпоинт, мы хотим сэкономить, то увеличиваем мощность.
2. Со стороны кода. 

### Кейс 2. Обращаемся к публичному API, иногда возвращает 429 из-за большого количества запросов. У нас массив прокси, штук 20 и мы идем к этому сервису, где 80% - успешно, 20% - сваливается. Как это решить?
Если автоматизировать закупку proxy, можно понять кто является поставщиком, и из-за этого можно собрать статистику и понимать каких поставщиков лучше занести в черный список.  
Подбирать сервера, которые не фейлятся.  
У нас будет ретрай с другой проксей с каким-нибудь таймаутом. 

### 12. Был MySQL и почему я должен переходить на PostgreSQL?
1. Там был тип JSONB, позволяло использовать JSON для конфигурации блока
Причин может быть гораздо больше.  
Там есть встроенные механизмы репликации, шардирования.

### 13. Что делать если скрипт делается 8 секунд, и мы хотим поменьше?
Делаем explain-analyze, смотрим план запроса, смотрим индексы.
1. Повесить индексы
2. Убрать лишние join
3. Сделать денормализацию
4. Можно понизить уровень изоляции транзакции. 
5. Можно кэши повесить

# Blockchain
### 14. Как ты бы объяснил ребенку, что такое blockchain?
 